!function(){function n(n,t){var e=document.createElement("div");e.className="notyf__toast";var o=document.createElement("div");o.className="notyf__wrapper";var i=document.createElement("div");i.className="notyf__icon";var a=document.createElement("i");a.className=t;var r=document.createElement("div");r.className="notyf__message",r.innerHTML=n,i.appendChild(a),o.appendChild(i),o.appendChild(r),e.appendChild(o);var c=this;return setTimeout(function(){e.className+=" notyf--disappear",e.addEventListener(c.animationEnd,function(n){n.target==e&&c.container.removeChild(e)});var n=c.notifications.indexOf(e);c.notifications.splice(n,1)},c.options.delay),e}this.Notyf=function(){this.notifications=[];var n={delay:2e3,alertIcon:"notyf__icon--alert",confirmIcon:"notyf__icon--confirm"};arguments[0]&&"object"==typeof arguments[0]?this.options=function(n,t){for(property in t)t.hasOwnProperty(property)&&(n[property]=t[property]);return n}(n,arguments[0]):this.options=n;var t=document.createDocumentFragment(),e=document.createElement("div");e.className="notyf",t.appendChild(e),document.body.appendChild(t),this.container=e,this.animationEnd=function(){var n,t=document.createElement("fake"),e={transition:"animationend",OTransition:"oAnimationEnd",MozTransition:"animationend",WebkitTransition:"webkitAnimationEnd"};for(n in e)if(void 0!==t.style[n])return e[n]}()},this.Notyf.prototype.alert=function(t){var e=n.call(this,t,this.options.alertIcon);e.className+=" notyf--alert",this.container.appendChild(e),this.notifications.push(e)},this.Notyf.prototype.confirm=function(t){var e=n.call(this,t,this.options.confirmIcon);e.className+=" notyf--confirm",this.container.appendChild(e),this.notifications.push(e)}}(),"function"==typeof define&&define.amd?define("Notyf",function(){return Notyf}):"undefined"!=typeof module&&module.exports?module.exports=Notyf:window.Notyf=Notyf;
"use strict";const backendUrl="http://localhost:3000",tokenHeader=new Headers({"x-access-token":localStorage.getItem("token")}),postHeader=new Headers({"x-access-token":localStorage.getItem("token"),"Content-Type":"application/json"});localStorage.getItem("token")||window.location.replace("/login");const notyf=new Notyf;document.addEventListener("DOMContentLoaded",async e=>{const t=await fetch(`${backendUrl}/api/links`,{method:"GET",headers:tokenHeader}),n=await t.json();if(!1===n.auth)return localStorage.removeItem("token"),void window.location.replace("/login");n.forEach(e=>{addLinkNew(e)},this)}),document.getElementById("add-form").addEventListener("submit",async e=>{e.preventDefault();const t=await fetch(`${backendUrl}/api/links`,{method:"POST",headers:postHeader,body:JSON.stringify({link:document.getElementById("input-url").value})}),n=await t.json();addLinkNew(n),document.getElementById("input-url").value="",notyf.confirm("Link successfully added")}),document.getElementById("logout").addEventListener("click",e=>{localStorage.removeItem("token"),window.location.replace("/login")}),document.getElementById("cards-id").addEventListener("click",async e=>{const t=e.target;let n;"BUTTON"==t.tagName&&(n=t.parentNode.parentNode.parentNode.id,await removeCard(n)),"INPUT"==t.tagName&&(t.select(),document.execCommand("Copy"),notyf.confirm(`Link <b>${t.value}</b> copied`))});const removeCard=async e=>{const t=await fetch(`${backendUrl}/api/links/${e}`,{method:"DELETE",headers:tokenHeader}),n=await t.json(),a=document.getElementById("cards-id"),d=document.getElementById(e);a.removeChild(d),notyf.alert(n.message)},addLinkNew=e=>{const t=e._id,n=e.link,a=e.shortLink,d=e.pageTitle,c=e.pageDescription,o=e.pageImage,l=e.clicks,i=document.createElement("div");i.className="card",i.id=t;const r=document.createElement("div");r.className="card-header";const s=document.createElement("div");s.className="card-header-img",s.style.backgroundImage=`url(${o})`;const m=document.createElement("div");m.className="card-header-delete";const p=document.createElement("button");p.className="delete-card-button",p.innerHTML="Delete";const u=document.createElement("div");u.className="card-header-link-clicks";const h=document.createElement("p");h.className="link-clicks",h.innerHTML=`Clicks: ${l}`;const k=document.createElement("div");k.className="card-header-info";const E=document.createElement("div");E.className="input-url-container";const g=document.createElement("input");g.type="text",g.className="show-full-url",g.value=n,g.readOnly=!0;const y=document.createElement("input");y.type="text",y.className="show-short-url",y.value=backendUrl+"/"+a,y.readOnly=!0;const N=document.createElement("div");N.className="card-content";const v=document.createElement("div");v.className="card-container";const C=document.createElement("h4");C.className="card-title";const w=document.createElement("b"),f=document.createElement("a");f.href=backendUrl+"/"+a,f.innerHTML=d,f.target="_blank";const I=document.createElement("p");I.className="card-description",I.innerHTML=c,i.appendChild(r),i.appendChild(N),r.appendChild(s),r.appendChild(k),k.appendChild(E),E.appendChild(g),E.appendChild(y),r.appendChild(m),m.appendChild(p),r.appendChild(u),u.appendChild(h),N.appendChild(v),v.appendChild(C),C.appendChild(w),w.appendChild(f),v.appendChild(I),document.getElementById("cards-id").appendChild(i)};